(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{17:function(e,t,n){e.exports=n(43)},41:function(e,t,n){},43:function(e,t,n){"use strict";n.r(t);var a=n(10),r=n.n(a),o=n(0),s=n.n(o),l=n(15),u=n(11),i=n(12),c=n(14),m=n(13),h=n(16),d=function(e){var t=e.person,n=e.handlePersonRemove;return s.a.createElement("li",null,t.name," ",t.number," ",s.a.createElement("button",{onClick:n},"poista"))},f=function(e){var t=e.filter,n=e.handleFilterChange;return s.a.createElement("div",null,"rajaa n\xe4ytett\xe4v\xe4:",s.a.createElement("input",{value:t,onChange:n}))},p=function(e){var t=e.message;return null===t?null:s.a.createElement("div",{className:"success"},t)},g=n(2),v=n.n(g),w="/api/persons",b={getAll:function(){return v.a.get(w).then(function(e){return e.data})},create:function(e){return v.a.post(w,e).then(function(e){return e.data})},update:function(e,t){return v.a.put("".concat(w,"/").concat(e),t).then(function(e){return e.data})},remove:function(e){return v.a.delete("".concat(w,"/").concat(e)).then(function(e){return e.data})}},N=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(c.a)(this,Object(m.a)(t).call(this,e))).toggleVisible=function(){n.setState({showAll:!n.state.showAll})},n.addPhoneNumber=function(e){e.preventDefault();var t={name:n.state.newName,number:n.state.newPhoneNumber,date:(new Date).new,important:Math.random()>.5},a=n.state.persons.filter(function(e){return e.name===n.state.newName}),r=n.state.persons.filter(function(e){return e.number===n.state.newPhoneNumber});console.log(a);var o=!1;if(0!==a.length&&(o=window.confirm(n.state.newName+"already in use. Shall we replace the old phone number?")),o){var s=a[0].id,u=n.state.persons.find(function(e){return e.id===s}),i=Object(l.a)({},u,{number:n.state.newPhoneNumber});b.update(a[0].id,t).then(function(e){console.log("update was a success, next update state");var t=n.state.persons.filter(function(e){return e.id!==s});n.setState({persons:t.concat(i),message:"phone number update succesful"}),setTimeout(function(){n.setState({message:null})},5e3)}).catch(function(e){console.log("PERSON TO BE UPDATED WAS NOT FOUND"),alert("Person you tried to update has already been removed!!!!!!")})}else 0===a.length&&0===r.length?b.create(t).then(function(e){console.log("post was a success, next update state"),n.setState({persons:n.state.persons.concat(e),newName:"",newPhoneNumber:"",message:"new person added succesfully"}),setTimeout(function(){n.setState({message:null})},5e3)}):alert("Name or phone number is already in use!")},n.handleFilterChange=function(e){console.log(e.target.value),n.setState({filter:e.target.value})},n.handleNameChange=function(e){console.log(e.target.value),n.setState({newName:e.target.value})},n.handlePhoneNumberChange=function(e){console.log(e.target.value),n.setState({newPhoneNumber:e.target.value})},n.removePhoneNumber=function(e){return function(){b.remove(e).then(function(t){var a=n.state.persons.filter(function(t){return t.id!==e});n.setState({persons:a,newName:"",newPhoneNumber:"",message:"person removed succesfully."}),setTimeout(function(){n.setState({message:null})},5e3)})}},n.state={persons:[],newName:"",newPhoneNumber:"",showAll:!0,filter:"",message:null},n}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;console.log("did mount"),b.getAll().then(function(t){e.setState({persons:t})})}},{key:"render",value:function(){var e=this;console.log("filter at app render:",this.state.filter.length);var t=this.state.filter.length<=0?this.state.persons:this.state.persons.filter(function(t){return t.name.toLowerCase().indexOf(e.state.filter.toLowerCase())>-1||t.number.toLowerCase().indexOf(e.state.filter.toLowerCase())>-1});return s.a.createElement("div",null,s.a.createElement("h2",null,"Puhelinluettelo tete"),s.a.createElement(p,{message:this.state.message}),s.a.createElement("div",null,s.a.createElement(f,{filter:this.state.filter,handleFilterChange:this.handleFilterChange})),s.a.createElement("h2",null,"Lis\xe4\xe4 uusi"),s.a.createElement("form",{onSubmit:this.addPhoneNumber},s.a.createElement("div",null,"nimi:",s.a.createElement("input",{value:this.state.newName,onChange:this.handleNameChange}),"puhelinnumero:",s.a.createElement("input",{value:this.state.newPhoneNumber,onChange:this.handlePhoneNumberChange})),s.a.createElement("div",null,s.a.createElement("button",{type:"submit"},"lis\xe4\xe4"))),s.a.createElement("h2",null,"Numerot"),s.a.createElement("ul",null,t.map(function(t){return s.a.createElement(d,{key:t.id,person:t,handlePersonRemove:e.removePhoneNumber(t.id)})})))}}]),t}(s.a.Component);n(41);r.a.render(s.a.createElement(N,null),document.getElementById("root"))}},[[17,2,1]]]);
//# sourceMappingURL=main.8b33444c.chunk.js.map